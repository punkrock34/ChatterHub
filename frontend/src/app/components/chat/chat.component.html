<div class="chat-messages-container">
  <div class="px-3 w-100 chat-messages">
    <div class="messages-container">
      <div *ngFor="let message of messagesList$ | async">
        <div *ngIf="!message.showAvatar && message.uid !== 'currentUserUID'" class="other-user-message" [ngClass]="{'with-timestamp': !message.showAvatar}">
          <div *ngIf="!message.showAvatar && message.showTimestamp" class="timestamp">{{ message.timestamp | date: 'shortTime' }}</div>
          <div class="message-content">
            <div class="message-text">{{ message.message }}</div>
          </div>
        </div>
        <div *ngIf="!message.showAvatar && message.uid === 'currentUserUID'" class="my-message" [ngClass]="{'with-timestamp': !message.showAvatar}">
          <div *ngIf="!message.showAvatar && message.showTimestamp" class="timestamp">{{ message.timestamp | date: 'shortTime' }}</div>
          <div class="message-content">
            <div class="message-text">{{ message.message }}</div>
          </div>
        </div>
        <div *ngIf="message.showAvatar" class="message-with-avatar">
          <div class="avatar-container">
            <img src="{{ message.photoURL }}" width="30" height="30" class="avatar" alt="">
          </div>
          <div class="message-content">
            <div class = "message-header">
              <div class="username">{{ message.displayName }}</div>
              <div class="timestamp">{{ message.timestamp | timestampFormat }}</div>
            </div>
            <div class="message-text">{{ message.message }}</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="input-container">
  <form (ngSubmit)="messagesService.sendMessage(form)" class="input-group" #form="ngForm" id="form">
    <input type="text" [(ngModel)]="messagesService.newMessage" name="newMessage" class="form-control" placeholder="Type your message here..." required>
    <div class="input-group-append">
      <button type="submit" class="btn btn-primary">Send</button>
    </div>
  </form>
</div>

